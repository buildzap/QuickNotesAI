<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Task History Changes</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        .task-history {
            background: #ffffff;
            border-radius: 16px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
            overflow: hidden;
            margin-bottom: 2rem;
        }

        .task-history-header {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%);
            padding: 1rem 1.5rem;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .task-history-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #1f2937;
            margin: 0;
        }

        .task-filters {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .filter-select {
            font-size: 0.75rem;
            padding: 0.25rem 0.5rem;
            border: 1px solid #e5e7eb;
            border-radius: 6px;
            background: #ffffff;
            color: #1f2937;
        }

        .task-grid {
            padding: 1rem;
        }

        .test-section {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .test-result {
            background: #e9ecef;
            border: 1px solid #ced4da;
            border-radius: 4px;
            padding: 0.5rem;
            margin-top: 0.5rem;
            font-family: monospace;
            font-size: 0.875rem;
        }

        .success {
            background: #d4edda;
            border-color: #c3e6cb;
            color: #155724;
        }

        .error {
            background: #f8d7da;
            border-color: #f5c6cb;
            color: #721c24;
        }
    </style>
</head>
<body>
    <div class="container mt-4">
        <h1 class="mb-4">Test Task History Changes</h1>
        
        <div class="test-section">
            <h5>Test Results</h5>
            <div id="testResults"></div>
        </div>

        <!-- Task History Section (Copy from main task.html) -->
        <div class="task-history">
            <div class="task-history-header">
                <h5 class="task-history-title">Task History</h5>
                <div class="task-filters">
                    <select class="filter-select" id="filterPriority">
                        <option value="">All Priorities</option>
                        <option value="high">High</option>
                        <option value="medium">Medium</option>
                        <option value="low">Low</option>
                    </select>
                    <select class="filter-select" id="filterStatus">
                        <option value="">All Status</option>
                        <option value="pending">Pending</option>
                        <option value="in-progress">In Progress</option>
                        <option value="completed">Completed</option>
                    </select>
                    <select class="filter-select" id="filterInputMethod">
                        <option value="">All Input Methods</option>
                        <option value="manual">Manual</option>
                        <option value="voice">Voice</option>
                        <option value="import">Import</option>
                        <option value="template">Template</option>
                    </select>
                    <select class="filter-select" id="filterRecurring">
                        <option value="">All Tasks</option>
                        <option value="recurring">Recurring Only</option>
                        <option value="non-recurring">Non-Recurring</option>
                    </select>
                    <select class="filter-select" id="filterTaskType">
                        <option value="">All Task Types</option>
                        <option value="individual">Individual Tasks</option>
                        <option value="team">Team Tasks</option>
                    </select>
                    <button class="btn btn-sm btn-outline-secondary" id="clearFiltersBtn">Clear</button>
                    <button class="btn btn-sm btn-outline-primary" id="refreshDataBtn" title="Refresh Task Data">
                        <i class="bi bi-arrow-clockwise"></i>
                    </button>
                    <button class="btn btn-sm btn-outline-danger" id="clearAllDataBtn" title="Clear All Tasks">
                        <i class="bi bi-trash"></i>
                    </button>
                </div>
            </div>
            <div class="task-grid" id="taskGrid">
                <!-- Tasks will be populated here in tile format -->
            </div>
        </div>
    </div>

    <script>
        // Test function to verify changes
        function runTests() {
            const results = [];
            
            // Test 1: Check if removed buttons are not present
            const removedButtons = [
                'checkSampleTasksBtn',
                'forceLiveDataBtn', 
                'clearCacheBtn',
                'clearFirebaseBtn',
                'forceRenderBtn',
                'resetListenersBtn',
                'toggleSampleTasksBtn'
            ];
            
            removedButtons.forEach(btnId => {
                const element = document.getElementById(btnId);
                if (element) {
                    results.push({
                        test: `Removed button ${btnId} should not exist`,
                        status: 'error',
                        message: `Button ${btnId} still exists in the DOM`
                    });
                } else {
                    results.push({
                        test: `Removed button ${btnId} should not exist`,
                        status: 'success',
                        message: `Button ${btnId} correctly removed`
                    });
                }
            });
            
            // Test 2: Check if new team filter is present
            const teamFilter = document.getElementById('filterTaskType');
            if (teamFilter) {
                results.push({
                    test: 'Team filter should be present',
                    status: 'success',
                    message: 'Team filter (filterTaskType) is present'
                });
                
                // Check if it has the correct options
                const options = Array.from(teamFilter.options).map(opt => opt.value);
                const expectedOptions = ['', 'individual', 'team'];
                if (JSON.stringify(options) === JSON.stringify(expectedOptions)) {
                    results.push({
                        test: 'Team filter should have correct options',
                        status: 'success',
                        message: `Team filter has correct options: ${options.join(', ')}`
                    });
                } else {
                    results.push({
                        test: 'Team filter should have correct options',
                        status: 'error',
                        message: `Team filter has incorrect options. Expected: ${expectedOptions.join(', ')}, Got: ${options.join(', ')}`
                    });
                }
            } else {
                results.push({
                    test: 'Team filter should be present',
                    status: 'error',
                    message: 'Team filter (filterTaskType) is missing'
                });
            }
            
            // Test 3: Check if remaining buttons are present
            const remainingButtons = [
                'clearFiltersBtn',
                'refreshDataBtn',
                'clearAllDataBtn'
            ];
            
            remainingButtons.forEach(btnId => {
                const element = document.getElementById(btnId);
                if (element) {
                    results.push({
                        test: `Remaining button ${btnId} should exist`,
                        status: 'success',
                        message: `Button ${btnId} is present`
                    });
                } else {
                    results.push({
                        test: `Remaining button ${btnId} should exist`,
                        status: 'error',
                        message: `Button ${btnId} is missing`
                    });
                }
            });
            
            // Display results
            const resultsContainer = document.getElementById('testResults');
            resultsContainer.innerHTML = results.map(result => `
                <div class="test-result ${result.status}">
                    <strong>${result.test}:</strong> ${result.message}
                </div>
            `).join('');
            
            // Summary
            const successCount = results.filter(r => r.status === 'success').length;
            const totalCount = results.length;
            
            const summary = document.createElement('div');
            summary.className = `test-result ${successCount === totalCount ? 'success' : 'error'}`;
            summary.innerHTML = `<strong>Summary:</strong> ${successCount}/${totalCount} tests passed`;
            resultsContainer.appendChild(summary);
            
            console.log('Test Results:', results);
        }
        
        // Run tests when page loads
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(runTests, 100);
        });
        
        // Also run tests when filters change to test functionality
        document.addEventListener('change', function(e) {
            if (e.target.id === 'filterTaskType') {
                console.log('Team filter changed to:', e.target.value);
                // Add a small test result
                const resultsContainer = document.getElementById('testResults');
                const testResult = document.createElement('div');
                testResult.className = 'test-result success';
                testResult.innerHTML = `<strong>Filter Test:</strong> Team filter changed to "${e.target.value}"`;
                resultsContainer.appendChild(testResult);
            }
        });
    </script>
</body>
</html> 